<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="./img/LifeWeekIcon.png" />
    <link rel="apple-touch-icon" href="./img/LifeWeekIcon.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./img/LifeWeekIcon.png"
    />
    <!-- === SEO START === -->
    <meta
      name="description"
      content="ç”Ÿå‘½è¨ˆç®—æ©Ÿéˆæ„Ÿæºè‡ªã€Šåªæ­»ä¸€æ¬¡çš„äººç”Ÿã€‹ã€Šäººç”Ÿå››åƒå€‹ç¦®æ‹œã€‹æ ¸å¿ƒè§€é»ï¼šä¸€ç”Ÿç´„ 4000 é€±ï¼Œèˆ‡å…¶å€’æ•¸ï¼Œä¸å¦‚è¡Œå‹•ã€‚ä»¥è‰²å¡Šè¦–è¦ºåŒ–ä½ å·²èµ°éèˆ‡å‰©é¤˜çš„é€±æ•¸ï¼Œæ­é…å¿ƒç†å­¸æ¦‚å¿µï¼Œå”åŠ©ä½ èšç„¦ç•¶ä¸‹ã€é‡æ–°æŒæ¡äººç”Ÿä¸»å‹•æ¬Šã€‚"
    />

    <meta
      name="keywords"
      content="ç”Ÿå‘½è¨ˆç®—æ©Ÿ, Life Calculator, äººç”Ÿé€±æ•¸, äººç”Ÿé€²åº¦, äººç”Ÿè¦åŠƒ, ç”Ÿå‘½é€±æœŸ, åªæ­»ä¸€æ¬¡çš„äººç”Ÿ, äººç”Ÿå››åƒå€‹ç¦®æ‹œ, 4000é€±, æ­£å‘å¿ƒç†å­¸, è¡Œå‹•åŠ›, æ™‚é–“ç®¡ç†, äººç”Ÿå•Ÿç¤º"
    />
    <meta name="author" content="LifeWeek" />

    <!-- Open Graph -->
    <meta property="og:title" content="ç”Ÿå‘½è¨ˆç®—æ©Ÿ Life Calendar" />
    <meta
      property="og:description"
      content="éˆæ„Ÿæºè‡ªã€Šåªæ­»ä¸€æ¬¡çš„äººç”Ÿã€‹ã€Šäººç”Ÿå››åƒå€‹ç¦®æ‹œã€‹â€”â€”ä¸€ç”Ÿç´„ 4000 é€±ã€‚ç”Ÿå‘½è¨ˆç®—æ©Ÿä»¥è¦–è¦ºåŒ–é€±æ•¸å‘ˆç¾ä½ çš„äººç”Ÿé€²åº¦ï¼Œå¹«åŠ©ä½ åœæ­¢ç„¦æ…®å€’æ•¸ã€å›åˆ°è¡Œå‹•æœ¬èº«ï¼Œå»ºç«‹æœ‰æ„ç¾©çš„é•·æœŸç¯€å¥ã€‚"
    />
    <meta
      property="og:image"
      content="https://jessieyuuuuu.github.io/hexschool_vue_2025_VibeCoding/img/LifeWeekIcon.png"
    />
    <meta
      property="og:url"
      content="https://jessieyuuuuu.github.io/hexschool_vue_2025_VibeCoding/LifeWeeksCalculator.html"
    />
    <meta property="og:type" content="website" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ç”Ÿå‘½è¨ˆç®—æ©Ÿ Life Calendar" />
    <meta
      name="twitter:description"
      content="ä»¥ã€Šåªæ­»ä¸€æ¬¡çš„äººç”Ÿã€‹ã€Šäººç”Ÿå››åƒå€‹ç¦®æ‹œã€‹ç‚ºç†å¿µï¼šäººç”Ÿåªæœ‰ 4000 é€±ã€‚ç”Ÿå‘½è¨ˆç®—æ©Ÿç”¨æœ€ç›´è¦ºçš„æ–¹å¼è®“ä½ çœ‹æ¸…äººç”Ÿé€²åº¦ï¼Œæ¶ˆé™¤ç„¦æ…®ã€å›åˆ°è¡Œå‹•æœ¬è³ªã€‚"
    />
    <meta
      name="twitter:image"
      content="https://jessieyuuuuu.github.io/hexschool_vue_2025_VibeCoding/img/LifeWeekIcon.png"
    />
    <!-- === SEO END === -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "ç”Ÿå‘½è¨ˆç®—æ©Ÿ Life Calendar",
        "url": "https://jessieyuuuuu.github.io/hexschool_vue_2025_VibeCoding/LifeWeeksCalculator.html",
        "description": "ç”Ÿå‘½è¨ˆç®—æ©Ÿéˆæ„Ÿæºè‡ªã€Šåªæ­»ä¸€æ¬¡çš„äººç”Ÿã€‹ã€Šäººç”Ÿå››åƒå€‹ç¦®æ‹œã€‹ï¼šä¸€ç”Ÿç´„ 4000 é€±ã€‚ä»¥è¦–è¦ºåŒ–é€±æ•¸å‘ˆç¾ä½ çš„äººç”Ÿé€²åº¦ï¼Œå”åŠ©ä½ åœæ­¢ç„¦æ…®å€’æ•¸ã€å›åˆ°è¡Œå‹•æœ¬è³ªï¼Œå»ºç«‹æœ‰æ„ç¾©çš„é•·æœŸç¯€å¥ã€‚",
        "inLanguage": "zh-Hant",
        "isPartOf": {
          "@type": "Website",
          "name": "LifeWeek",
          "url": "https://jessieyuuuuu.github.io/hexschool_vue_2025_VibeCoding/"
        },
        "publisher": {
          "@type": "Organization",
          "name": "LifeWeek"
        },
        "about": [
          {
            "@type": "Book",
            "name": "åªæ­»ä¸€æ¬¡çš„äººç”Ÿï¼šä¸€ç”Ÿä¸é 4000 é€±ï¼Œèˆ‡å…¶å€’æ•¸ï¼Œä¸å¦‚è¡Œå‹•",
            "author": "Oliver Burkeman",
            "description": "æ¢è¨äººç”Ÿæœ‰é™ã€å°ˆæ³¨è¡Œå‹•ã€é‡å»ºæ™‚é–“è§€å¿µçš„æ­£å‘å¿ƒç†å­¸ä½œå“ã€‚"
          },
          {
            "@type": "Book",
            "name": "äººç”Ÿå››åƒå€‹ç¦®æ‹œ",
            "author": "Oliver Burkeman",
            "description": "å¾æœ‰é™é€±æ•¸è¦–è§’é‡æ–°æ€è€ƒæ„ç¾©ã€è¡Œå‹•èˆ‡äººç”Ÿè¦åŠƒçš„ä»£è¡¨ä½œã€‚"
          }
        ]
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "ç”Ÿå‘½è¨ˆç®—æ©Ÿçš„æ¦‚å¿µå¾å“ªè£¡ä¾†ï¼Ÿ",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "ç”Ÿå‘½è¨ˆç®—æ©Ÿçš„æ¦‚å¿µæºè‡ªæ­£å‘å¿ƒç†å­¸èˆ‡ã€Šåªæ­»ä¸€æ¬¡çš„äººç”Ÿã€‹ã€Šäººç”Ÿå››åƒå€‹ç¦®æ‹œã€‹ï¼Œä»¥ä¸€ç”Ÿç´„ 4000 é€±ç‚ºè¦–è§’ï¼Œè®“ä½¿ç”¨è€…é€éè¦–è¦ºåŒ–é€±æ•¸ç†è§£äººç”Ÿé€²åº¦ã€é‡æ–°èšç„¦ç•¶ä¸‹ä¸¦æ¡å–è¡Œå‹•ã€‚"
            }
          },
          {
            "@type": "Question",
            "name": "ç”Ÿå‘½è¨ˆç®—æ©Ÿå¦‚ä½•è¨ˆç®—äººç”Ÿé€±æ•¸ï¼Ÿ",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "ä½¿ç”¨è€…è¼¸å…¥å‡ºç”Ÿæ—¥æœŸèˆ‡é æœŸå£½å‘½å¾Œï¼Œç³»çµ±æœƒä»¥æ¯é€±ç‚ºå–®ä½è¨ˆç®—å·²èµ°éèˆ‡å‰©é¤˜çš„é€±æ•¸ã€‚ä¸¦æä¾›å«ç¡çœ èˆ‡ä¸å«ç¡çœ ï¼ˆæ¸…é†’é€±ï¼‰å…©ç¨®æ¨¡å¼ï¼Œä»¥å”åŠ©ä½¿ç”¨è€…ç†è§£å¯¦éš›å¯é‹ç”¨çš„ç”Ÿå‘½æ™‚é–“ã€‚"
            }
          },
          {
            "@type": "Question",
            "name": "ç”Ÿå‘½è¨ˆç®—æ©Ÿèƒ½å¸¶ä¾†ä»€éº¼å¹«åŠ©ï¼Ÿ",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "é€éè¦–è¦ºåŒ–äººç”Ÿé€±æ•¸ï¼Œä½¿ç”¨è€…èƒ½æ›´æ¸…æ¥šæŒæ¡æœ‰é™æ™‚é–“ï¼Œæ”¹å–„æ‹–å»¶ã€å¢åŠ è¡Œå‹•å‹•åŠ›ï¼›ä¸¦ä»¥å¿ƒç†å­¸è§€é»è¼”åŠ©åæ€ï¼Œé‡æ–°å»ºç«‹å°æ™‚é–“çš„æŒæ§æ„Ÿèˆ‡é•·æœŸç¯€å¥ã€‚"
            }
          }
        ]
      }
    </script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-TCH3574CL7"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      const gtag = (...args) => dataLayer.push(args);

      gtag("js", new Date());
      gtag("config", "G-TCH3574CL7");
    </script>

    <title>
      ç”Ÿå‘½è¨ˆç®—æ©Ÿï½œäººç”Ÿåªæœ‰ 4000 é€±ï¼šè¦–è¦ºåŒ–ä½ çš„ç”Ÿå‘½é€²åº¦ï½œLife Calendar
    </title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .header p {
        opacity: 0.9;
        font-size: 0.95rem;
      }

      .content {
        padding: 30px;
      }

      .input-section {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
      }

      .input-group input {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s;
      }

      .input-group input:focus {
        outline: none;
        border-color: #667eea;
      }

      .toggle-section {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .toggle-btn {
        flex: 1;
        min-width: 150px;
        min-height: 80px;
        padding: 12px 20px;
        border: 2px solid #667eea;
        background: white;
        color: #667eea;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .toggle-btn.active {
        background: #667eea;
        color: white;
      }

      .toggle-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      }

      .stats-section {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
      }

      .stat-card h3 {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 10px;
      }

      .stat-card .number {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .stat-card .label {
        font-size: 0.85rem;
        opacity: 0.8;
      }

      .stat-card.days {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .stat-card.progress {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      .message-box {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        font-size: 1.1rem;
        line-height: 1.6;
        color: #856404;
      }

      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(52, 1fr);
        gap: 3px;
        margin-top: 20px;
      }

      .week-cell {
        aspect-ratio: 1;
        border-radius: 2px;
        transition: transform 0.2s;
      }

      .week-cell:hover {
        transform: scale(1.5);
        z-index: 10;
      }

      .week-cell.passed {
        background: #667eea;
      }

      .week-cell.remaining {
        background: #e0e0e0;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 1.5rem;
        }

        .content {
          padding: 20px;
        }

        .input-section {
          padding: 20px;
        }

        .stat-card .number {
          font-size: 2rem;
        }

        .calendar-grid {
          grid-template-columns: repeat(26, 1fr);
          gap: 2px;
        }

        .toggle-section {
          flex-direction: column;
        }

        .toggle-btn {
          min-width: 100%;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 10px;
        }

        .header {
          padding: 20px;
        }

        .calendar-grid {
          grid-template-columns: repeat(13, 1fr);
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ• äººç”Ÿè¨ˆç®—å™¨</h1>
        <p>æ¯ä¸€é€±éƒ½æ˜¯ç¨ç‰¹çš„æ•…äº‹</p>
      </div>

      <div class="content">
        <div class="input-section">
          <div class="input-group">
            <label for="nickname">æš±ç¨±</label>
            <input
              type="text"
              id="nickname"
              placeholder="è«‹è¼¸å…¥ä½ çš„æš±ç¨±"
              value="æ—…äºº"
            />
          </div>

          <div class="input-group">
            <label for="birthDate">å‡ºç”Ÿæ—¥æœŸ</label>
            <input type="date" id="birthDate" max="9999-12-31" />
          </div>

          <div class="input-group">
            <label for="targetAge">é æœŸå£½å‘½ï¼ˆæ­²ï¼‰</label>
            <input type="number" id="targetAge" min="1" max="120" value="80" />
          </div>

          <div class="toggle-section">
            <button class="toggle-btn active" data-mode="full">
              â˜‘ å«ç¡çœ ï¼ˆå…¨éƒ¨é€±æ•¸ï¼‰
            </button>
            <button class="toggle-btn" data-mode="awake">
              â˜‘ ä¸å«ç¡çœ ï¼ˆæ¸…é†’é€±ï¼‰
              <span
                style="
                  display: block;
                  font-size: 0.75rem;
                  font-weight: normal;
                  margin-top: 4px;
                "
                >æ‰£é™¤ 1/3 ç¡çœ æ™‚é–“</span
              >
            </button>
          </div>
        </div>

        <div class="message-box" id="messageBox">è«‹è¼¸å…¥ä½ çš„è³‡æ–™é–‹å§‹è¨ˆç®—</div>

        <div class="stats-section" id="statsSection"></div>

        <div class="calendar-grid" id="calendarGrid"></div>
      </div>
    </div>

    <script>
      // å¸¸æ•¸å®šç¾©
      const MS_PER_DAY = 1000 * 60 * 60 * 24;
      const MS_PER_WEEK = MS_PER_DAY * 7;

      // å‹µå¿—èªå¥åº«
      const messages = {
        youth: [
          "{nickname}ï¼Œä½ çš„ä¸–ç•Œé‚„åœ¨å±•é–‹ï¼Œé€™äº›é€±åªæ˜¯åºç« ã€‚",
          "ä½ æ­£åœ¨å»ºç«‹äººç”Ÿçš„åº•å±¤æ¶æ§‹ï¼Œ{nickname}ï¼Œç¯€å¥ä¸æ€¥ã€‚",
          "æ¯ä¸€é€±éƒ½åœ¨ç‚ºæœªä¾†çš„ä½ æ‰“åŸºç¤ï¼Œ{nickname}ã€‚",
          "å¹´è¼•å°±æ˜¯æœ€å¤§çš„è³‡æœ¬ï¼Œå¥½å¥½é‹ç”¨é€™äº›é€±æ•¸ï¼Œ{nickname}ã€‚",
          "é€™äº›é€±æ•¸æ˜¯ä½ æ¢ç´¢ä¸–ç•Œçš„èµ·é»ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ é‚„æœ‰ç„¡é™å¯èƒ½ç­‰å¾…ç™¼æ˜ã€‚",
          "åˆ¥æ€¥è‘—å®šç¾©è‡ªå·±ï¼Œ{nickname}ï¼Œè®“æ™‚é–“æ…¢æ…¢é›•ç¢ã€‚",
          "æ¯å€‹éŒ¯èª¤éƒ½æ˜¯æˆé•·çš„é¤Šåˆ†ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œç¾åœ¨çš„è¿·èŒ«æ˜¯æ­£å¸¸çš„ï¼Œç¹¼çºŒå‰é€²å°±å°äº†ã€‚",
          "ä½ çš„æ•…äº‹æ‰å‰›é–‹å§‹ï¼Œ{nickname}ï¼Œç²¾å½©é‚„åœ¨å¾Œé ­ã€‚",
          "é€™å€‹å¹´ç´€æœ€é©åˆå¤§è†½å˜—è©¦ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä¸è¦å®³æ€•å¤±æ•—ï¼Œå®ƒå€‘éƒ½æ˜¯ç¶“é©—å€¼ã€‚",
          "ä½ æ“æœ‰æœ€çè²´çš„è³‡æºâ€”â€”æ™‚é–“ï¼Œ{nickname}ã€‚",
          "æ¯ä¸€é€±çš„å­¸ç¿’éƒ½åœ¨ç´¯ç©ä½ çš„ç«¶çˆ­åŠ›ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä¿æŒå¥½å¥‡å¿ƒï¼Œä¸–ç•Œæ¯”ä½ æƒ³åƒçš„æ›´å¤§ã€‚",
          "ç¾åœ¨å»ºç«‹çš„ç¿’æ…£æœƒå½±éŸ¿ä½ ä¸€è¼©å­ï¼Œ{nickname}ã€‚",
          "ä½ çš„æ½›åŠ›é‚„æ²’è¢«å®Œå…¨é–‹ç™¼ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œäº«å—é€™æ®µå¯ä»¥ç›¡æƒ…è©¦éŒ¯çš„æ™‚å…‰ã€‚",
          "åˆ¥è¢«ä»–äººçš„æœŸå¾…æŸç¸›ï¼Œ{nickname}ï¼Œèµ°è‡ªå·±çš„è·¯ã€‚",
          "é€™äº›é€±æ•¸æ˜¯ä½ æ‰“é€ å¤¢æƒ³çš„åŸæ–™ï¼Œ{nickname}ã€‚",
        ],
        young: [
          "{nickname}ï¼Œé€™æ˜¯ä½ æœ€å…·çˆ†ç™¼åŠ›çš„éšæ®µï¼Œæ¯ä¸€é€±éƒ½èƒ½æ˜¯è½‰æŠ˜é»ã€‚",
          "ä¿æŒé•·æœŸä¸»å‹•æ¬Šï¼Œä½ çš„é€±æ•¸é‚„æœ‰å·¨å¤§ä¼¸å±•æ€§ï¼Œ{nickname}ã€‚",
          "ç¾åœ¨çš„æ¯ä¸€é€±æŠ•è³‡ï¼Œéƒ½æœƒåœ¨æœªä¾†é–‹èŠ±çµæœï¼Œ{nickname}ã€‚",
          "ä½ æ­£è™•æ–¼äººç”Ÿçš„é»ƒé‡‘æ™‚æœŸï¼ŒæŠŠæ¡æ¯ä¸€é€±ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œé€™å€‹éšæ®µçš„é¸æ“‡æœƒå®šç¾©ä½ çš„æœªä¾†åå¹´ã€‚",
          "ä½ å·²ç¶“ä¸å†æ˜¯æ–°æ‰‹ï¼Œ{nickname}ï¼Œæ˜¯æ™‚å€™å±•ç¾å¯¦åŠ›äº†ã€‚",
          "æ¯ä¸€é€±çš„åŠªåŠ›éƒ½åœ¨ç‚ºä½ çš„ç†æƒ³é‹ªè·¯ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„ç¶“é©—å’Œæ´»åŠ›æ­£è™•æ–¼æœ€ä½³å¹³è¡¡é»ã€‚",
          "é€™æ˜¯å»ºç«‹äº‹æ¥­å’Œå®¶åº­çš„é—œéµæ™‚æœŸï¼Œ{nickname}ã€‚",
          "åˆ¥è®“å¿™ç¢Œæ©è“‹äº†ç”Ÿæ´»çš„æ„ç¾©ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„æ±ºç­–é–‹å§‹ç”¢ç”Ÿé•·é å½±éŸ¿äº†ã€‚",
          "ä¿æŒå­¸ç¿’çš„ç†±æƒ…ï¼Œ{nickname}ï¼Œä¸–ç•Œè®ŠåŒ–å¾ˆå¿«ã€‚",
          "é€™äº›é€±æ•¸æ˜¯ä½ ç´¯ç©è²¡å¯Œå’Œæ™ºæ…§çš„é»ƒé‡‘æœŸï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œå¹³è¡¡å·¥ä½œèˆ‡ç”Ÿæ´»ï¼Œå…©è€…éƒ½å¾ˆé‡è¦ã€‚",
          "ä½ çš„äººè„ˆå’Œè³‡æºæ­£åœ¨å¿«é€Ÿç´¯ç©ï¼Œ{nickname}ã€‚",
          "æ¯ä¸€é€±éƒ½æ˜¯æŠ•è³‡è‡ªå·±çš„æ©Ÿæœƒï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä¸è¦å¿˜è¨˜ç…§é¡§è‡ªå·±çš„èº«å¿ƒå¥åº·ã€‚",
          "é€™å€‹éšæ®µçš„å …æŒæœƒå¸¶ä¾†å·¨å¤§å›å ±ï¼Œ{nickname}ã€‚",
          "ä½ æ­£åœ¨æˆç‚ºæ›´å¥½çš„è‡ªå·±ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œè¨˜å¾—å¶çˆ¾åœä¸‹ä¾†æ¬£è³æ²¿é€”é¢¨æ™¯ã€‚",
        ],
        middle: [
          "{nickname}ï¼Œä½ å·²ç´¯ç©äº†å …å¯¦åŸºç¤ï¼Œæ¥ä¸‹ä¾†æ˜¯æ”¶æ–‚èˆ‡çªç ´çš„éšæ®µã€‚",
          "ä½ çš„ç¶“é©—æ­£åœ¨è½‰æ›æˆçœŸæ­£çš„åŠ›é‡ï¼Œ{nickname}ã€‚",
          "é€™å€‹éšæ®µçš„æ¯ä¸€é€±éƒ½æ›´æœ‰åƒ¹å€¼å’Œæ·±åº¦ï¼Œ{nickname}ã€‚",
          "ä½ å·²ç¶“èµ°éäº†è¨±å¤šï¼Œæ¥ä¸‹ä¾†æ˜¯æ”¶ç©«çš„æ™‚åˆ»ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„æ™ºæ…§å·²ç¶“è¶…è¶Šäº†å–®ç´”çš„çŸ¥è­˜ã€‚",
          "é€™äº›å¹´çš„ç©ç´¯è®“ä½ æ›´æ‡‚å¾—å–æ¨ï¼Œ{nickname}ã€‚",
          "ä½ é–‹å§‹ç†è§£ä»€éº¼æ‰æ˜¯çœŸæ­£é‡è¦çš„ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„å½±éŸ¿åŠ›æ­£åœ¨æ“´å¤§ã€‚",
          "é€™å€‹éšæ®µé©åˆå‚³æ‰¿å’ŒæŒ‡å°ä»–äººï¼Œ{nickname}ã€‚",
          "ä½ çš„ç¶“é©—æ˜¯å¹´è¼•äººçš„å¯¶è²´è³‡æºï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ å·²ç¶“è­‰æ˜äº†è‡ªå·±çš„åƒ¹å€¼ã€‚",
          "ç¾åœ¨æ˜¯äº«å—æˆæœçš„æ™‚å€™äº†ï¼Œ{nickname}ã€‚",
          "ä½ çš„åˆ¤æ–·åŠ›å·²ç¶“çˆç«ç´”é’ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çŸ¥é“å¦‚ä½•åœ¨è¤‡é›œä¸­æ‰¾åˆ°ç°¡å–®ã€‚",
          "é€™äº›é€±æ•¸è¦‹è­‰äº†ä½ çš„æˆé•·å’Œè›»è®Šï¼Œ{nickname}ã€‚",
          "ä½ çš„ç©©å®šä¾†è‡ªæ–¼å¤šå¹´çš„åŠªåŠ›ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ å·²ç¶“å»ºç«‹äº†å±¬æ–¼è‡ªå·±çš„äººç”Ÿç¯€å¥ã€‚",
          "é€™å€‹éšæ®µé©åˆæ·±åŒ–è€Œéæ“´å¼µï¼Œ{nickname}ã€‚",
          "ä½ çš„äººç”Ÿç¶“é©—æ˜¯ç„¡æ³•è¤‡è£½çš„è³‡ç”¢ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ å·²ç¶“å­¸æœƒäº†èˆ‡è‡ªå·±å’Œè§£ã€‚",
        ],
        senior: [
          "{nickname}ï¼Œä½ å·²è·¨éç„¡æ•¸è‰±é›£é€±æœŸï¼Œé€™æœ¬èº«å°±æ˜¯å€¼å¾—è‚¯å®šçš„æ•…äº‹ã€‚",
          "ä½ èµ°éçš„æ¯é€±éƒ½åœ¨å¡‘é€ ç¾åœ¨çš„ç©©å®šèˆ‡æ™ºæ…§ï¼Œ{nickname}ã€‚",
          "ä½ çš„äººç”Ÿç¶“é©—æ˜¯ç„¡åƒ¹çš„å¯¶è—ï¼Œ{nickname}ã€‚",
          "æ¯ä¸€é€±éƒ½è¦‹è­‰äº†ä½ çš„å …éŸŒèˆ‡æ™ºæ…§ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€éƒ¨æ´»æ­·å²ã€‚",
          "é€™äº›å¹´çš„é¢¨é›¨è®“ä½ æ›´åŠ å¾å®¹ï¼Œ{nickname}ã€‚",
          "ä½ å·²ç¶“çœ‹é€äº†è¨±å¤šäººç”Ÿçš„çœŸç›¸ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„å¹³éœä¾†è‡ªæ–¼æ·±åˆ»çš„ç†è§£ã€‚",
          "ä½ çš„æ•…äº‹å€¼å¾—è¢«è¨˜éŒ„å’Œå‚³æ‰¿ï¼Œ{nickname}ã€‚",
          "é€™å€‹å¹´ç´€çš„æ¯ä¸€å¤©éƒ½æ˜¯ç¦®ç‰©ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ å·²ç¶“å®Œæˆäº†è¨±å¤šäººç„¡æ³•å®Œæˆçš„äº‹ã€‚",
          "ä½ çš„æ™ºæ…§æ˜¯æ™‚é–“çš„çµæ™¶ï¼Œ{nickname}ã€‚",
          "ä½ è¦‹è­‰äº†æ™‚ä»£çš„è®Šé·ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„äººç”Ÿå·²ç¶“è¶³å¤ ç²¾å½©ã€‚",
          "é€™äº›é€±æ•¸è¨˜éŒ„äº†ä½ çš„å‹‡æ°£å’Œå …æŒï¼Œ{nickname}ã€‚",
          "ä½ çš„ç¶“æ­·æ˜¯å¾Œè¼©çš„æŒ‡è·¯æ˜ç‡ˆï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ å·²ç¶“è´å¾—äº†å®‰è©³çš„æ¬Šåˆ©ã€‚",
          "ä½ çš„äººç”Ÿæ˜¯ä¸€æœ¬å€¼å¾—ç´°è®€çš„æ›¸ï¼Œ{nickname}ã€‚",
          "æ¯ä¸€å€‹çšºç´‹éƒ½æ˜¯æ­²æœˆçš„å‹³ç« ï¼Œ{nickname}ã€‚",
          "{nickname}ï¼Œä½ çš„å­˜åœ¨è®“ä¸–ç•Œæ›´åŠ è±å¯Œã€‚",
        ],
      };

      // å–å¾—éš¨æ©Ÿè¨Šæ¯
      const getRandomMessage = (age, nickname) => {
        let category;
        if (age <= 17) category = "youth";
        else if (age <= 40) category = "young";
        else if (age <= 65) category = "middle";
        else category = "senior";

        const messageList = messages[category];
        const randomMsg =
          messageList[Math.floor(Math.random() * messageList.length)];
        return randomMsg.replace("{nickname}", nickname);
      };

      // è¨ˆç®—é€±æ•¸å’Œå¤©æ•¸
      const calculateWeeks = (birthDate, targetAge, displayMode) => {
        const today = new Date();
        const birth = new Date(birthDate);
        const endDate = new Date(birth);
        endDate.setFullYear(birth.getFullYear() + parseInt(targetAge));

        const totalWeeks = Math.floor((endDate - birth) / MS_PER_WEEK);
        const passedWeeks = Math.floor((today - birth) / MS_PER_WEEK);
        const remainingWeeks = totalWeeks - passedWeeks;

        // è¨ˆç®—å¤©æ•¸
        const totalDays = Math.floor((endDate - birth) / MS_PER_DAY);
        const passedDays = Math.floor((today - birth) / MS_PER_DAY);
        const remainingDays = totalDays - passedDays;

        let result = {
          total: totalWeeks,
          passed: passedWeeks,
          remaining: remainingWeeks,
          totalDays: totalDays,
          passedDays: passedDays,
          remainingDays: remainingDays,
          percentage: ((passedWeeks / totalWeeks) * 100).toFixed(1),
        };

        if (displayMode === "awake") {
          result = {
            total: Math.floor(totalWeeks * (2 / 3)),
            passed: Math.floor(passedWeeks * (2 / 3)),
            remaining: Math.floor(remainingWeeks * (2 / 3)),
            totalDays: Math.floor(totalDays * (2 / 3)),
            passedDays: Math.floor(passedDays * (2 / 3)),
            remainingDays: Math.floor(remainingDays * (2 / 3)),
            percentage: ((passedWeeks / totalWeeks) * 100).toFixed(1),
          };
        }

        return result;
      };

      // æ¸²æŸ“çµ±è¨ˆå¡ç‰‡
      const renderStats = (stats) => {
        const statsSection = document.getElementById("statsSection");
        statsSection.innerHTML = `
          <div class="stat-card">
            <h3>å·²èµ°é</h3>
            <div class="number">${stats.passed.toLocaleString()}</div>
            <div class="label">é€±</div>
          </div>
          <div class="stat-card">
            <h3>å‰©é¤˜</h3>
            <div class="number">${stats.remaining.toLocaleString()}</div>
            <div class="label">é€±</div>
          </div>
          <div class="stat-card days">
            <h3>å·²èµ°é</h3>
            <div class="number">${stats.passedDays.toLocaleString()}</div>
            <div class="label">å¤©</div>
          </div>
          <div class="stat-card days">
            <h3>å‰©é¤˜</h3>
            <div class="number">${stats.remainingDays.toLocaleString()}</div>
            <div class="label">å¤©</div>
          </div>
          <div class="stat-card progress">
            <h3>äººç”Ÿé€²åº¦</h3>
            <div class="number">${stats.percentage}%</div>
            <div class="label">å·²å®Œæˆ</div>
          </div>
        `;
      };

      // æ¸²æŸ“æ—¥æ›†æ ¼å­
      const renderCalendar = (stats) => {
        const calendarGrid = document.getElementById("calendarGrid");
        calendarGrid.innerHTML = "";

        for (let i = 0; i < stats.total; i++) {
          const cell = document.createElement("div");
          cell.className = `week-cell ${
            i < stats.passed ? "passed" : "remaining"
          }`;
          cell.title = `ç¬¬ ${i + 1} é€±`;
          calendarGrid.appendChild(cell);
        }
      };

      // å„²å­˜åˆ° localStorage
      const saveToLocalStorage = (data) => {
        localStorage.setItem("lifeWeeksData", JSON.stringify(data));
      };

      // å¾ localStorage è¼‰å…¥
      const loadFromLocalStorage = () => {
        const data = localStorage.getItem("lifeWeeksData");
        return data ? JSON.parse(data) : null;
      };

      // æ›´æ–°è¨ˆç®—
      const updateCalculation = () => {
        const nickname = document.getElementById("nickname").value || "æ—…äºº";
        const birthDate = document.getElementById("birthDate").value;
        const targetAge = document.getElementById("targetAge").value;
        const displayMode =
          document.querySelector(".toggle-btn.active").dataset.mode;

        if (!birthDate) {
          document.getElementById("messageBox").textContent =
            "è«‹è¼¸å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸ";
          return;
        }

        // å„²å­˜è³‡æ–™
        saveToLocalStorage({ nickname, birthDate, targetAge, displayMode });

        // è¨ˆç®—é€±æ•¸
        const stats = calculateWeeks(birthDate, targetAge, displayMode);

        // è¨ˆç®—å¹´é½¡
        const today = new Date();
        const birth = new Date(birthDate);
        const age = today.getFullYear() - birth.getFullYear();

        // é¡¯ç¤ºè¨Šæ¯
        const message = getRandomMessage(age, nickname);
        document.getElementById("messageBox").textContent = message;

        // æ¸²æŸ“çµæœ
        renderStats(stats);
        renderCalendar(stats);
      };

      // åˆå§‹åŒ–
      const init = () => {
        // è¼‰å…¥å„²å­˜çš„è³‡æ–™
        const savedData = loadFromLocalStorage();
        if (savedData) {
          document.getElementById("nickname").value =
            savedData.nickname || "æ—…äºº";
          document.getElementById("birthDate").value =
            savedData.birthDate || "";
          document.getElementById("targetAge").value =
            savedData.targetAge || 80;

          // è¨­å®šé¡¯ç¤ºæ¨¡å¼
          document.querySelectorAll(".toggle-btn").forEach((btn) => {
            btn.classList.remove("active");
            if (btn.dataset.mode === savedData.displayMode) {
              btn.classList.add("active");
            }
          });
        }

        // ç¶å®šäº‹ä»¶
        document
          .getElementById("nickname")
          .addEventListener("input", updateCalculation);
        document
          .getElementById("birthDate")
          .addEventListener("change", updateCalculation);
        document
          .getElementById("targetAge")
          .addEventListener("input", updateCalculation);

        document.querySelectorAll(".toggle-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            document
              .querySelectorAll(".toggle-btn")
              .forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            updateCalculation();
          });
        });

        // åˆå§‹è¨ˆç®—
        if (savedData && savedData.birthDate) {
          updateCalculation();
        }
      };

      // å•Ÿå‹•
      init();
      /* === GA4 äº‹ä»¶è¿½è¹¤ === */

      // æš±ç¨±è¼¸å…¥
      document.getElementById("nickname").addEventListener("input", (e) => {
        gtag("event", "input_nickname", {
          nickname: e.target.value || "(empty)",
        });
      });

      // å‡ºç”Ÿæ—¥æœŸè¼¸å…¥
      document.getElementById("birthDate").addEventListener("change", (e) => {
        gtag("event", "input_birthdate", {
          birthdate: e.target.value,
        });
      });

      // é æœŸå£½å‘½è¼¸å…¥
      document.getElementById("targetAge").addEventListener("input", (e) => {
        gtag("event", "input_target_age", {
          target_age: Number(e.target.value),
        });
      });

      // æ¨¡å¼åˆ‡æ›ï¼ˆå«ç¡çœ  / ä¸å«ç¡çœ ï¼‰
      document.querySelectorAll(".toggle-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          gtag("event", "switch_display_mode", {
            mode: btn.dataset.mode,
          });
        });
      });

      // å®Œæˆä¸€æ¬¡è¨ˆç®—
      const originalUpdateCalculation = updateCalculation;
      updateCalculation = () => {
        const nickname = document.getElementById("nickname").value || "æ—…äºº";
        const birthDate = document.getElementById("birthDate").value;
        const targetAge = document.getElementById("targetAge").value;
        const mode = document.querySelector(".toggle-btn.active").dataset.mode;

        // å‘¼å«åŸæœ¬çš„è¨ˆç®—é‚è¼¯
        originalUpdateCalculation();

        // åªæœ‰åœ¨æœ‰ç”Ÿæ—¥æ™‚æ‰è¨˜éŒ„ï¼ˆé¿å…åˆå§‹ç©ºå€¼å¤§é‡äº‹ä»¶ï¼‰
        if (birthDate) {
          gtag("event", "life_calculated", {
            nickname,
            birthdate: birthDate,
            target_age: Number(targetAge),
            mode,
          });
        }
      };

      /* === END GA4 äº‹ä»¶è¿½è¹¤ === */
    </script>
  </body>
</html>
